(function(a,b){App={init:function(){App.addEvents();var c=a("nav").detach();a(".main").each(function(){a(this).prepend(c.clone());});c.remove();App.projects=App.projects||a("#main-work").data("projects");
a(window).bind("load",function(){a.each(App.projects,function(d,e){a.each(e.images,function(f,g){mimage.preload(g);});});});},setTitle:function(c){document.title="LuÃ­s Konrad "+c;
},addEvents:function(){a.address.change(Pages.change);mdocument.fixMasksPlace();a("a.submit").bind("click",function(c){c.preventDefault();a(this).closest("form").trigger("submit");
});a("form").bind("submit",function(c){if(!mform.validate(a(this))){return false;}if(a(this).hasClass("ajax")){return App.sendForm(c);}});a("input, select").keyup(function(c){if(c.which==10||c.which==13){a(this).closest("form").trigger("submit");
}});a("input, select, textarea").keyup(function(c){a(this).removeClass("error");});},sendForm:function(g){g.preventDefault();var d=a(g.target);var c=function(e){return d.find(".errormessage").text(e);
};if(d.data("ajax")){return c("Still sending. Wait...");}var f=a.ajax({url:d.attr("action"),type:"post",data:d.serialize(),dataType:"json",success:function(h,i){if(h.error){c(h.message);
}else{c("");var e=d.data("success");if(typeof e==="function"){e(h,d);}}d.removeData("ajax");},error:function(){c("Ops! Error. Try again!");d.removeData("ajax");
}});c("Sending...");d.data("ajax",f);}};Menu={fix:function(){},reset:function(){},change:function(d){var c=a("nav");Menu.itens=Menu.itens||a("a",c);Menu.itens.removeClass("active");
Menu.itens.filter("[href*="+d+"]").addClass("active");}};Pages={change:function(c){App.page=c.pathNames[0]||"home";_gaq.push(["_trackPageview"],App.page);
if(Pages[App.page]){a(".main").removeClass("active").css("height","auto");a("#main-"+App.page).addClass("active");setTimeout(function(){a(".main").css("height","0px").filter(".active").css("height","auto");
},600);if(!Pages[App.page].initialized){Pages[App.page].init(c);Pages[App.page].initialized=true;}else{if(typeof Pages[App.page].update=="function"){Pages[App.page].update(c);
}}}else{alert("404");}},home:{init:function(c){if(a.browser.mozilla){a("#main-home").css({top:"25%","margin-top":"0"});}this.update();},update:function(c){Menu.change("home");
}},about:{init:function(c){this.update();},update:function(c){Menu.change("about");App.setTitle("/ About");}},work:{init:function(c){App.projects=App.projects||a("#main-work").data("projects");
ko.applyBindings({projects:App.projects,loadImages:function(e){var g=e[1];var d=a(g).find("img");var f=d.data("src")||false;if(f){mimage.preload(f,function(){a(g).removeClass("loading");
d.attr("src",f);d.removeData("src");});}}},a("#main-work").get(0));this.update();},update:function(c){Menu.change("work");App.setTitle("/ Work");}},project:{init:function(c){a("#main-project nav").remove();
App.projects=App.projects||a("#main-work").data("projects");App.projectsByURI={};App.projectKO={uri:ko.observable(),nome:ko.observable(),images:ko.observableArray(),bgcolor:ko.observable(),paddingtop:ko.observable(),next:ko.observable(),prev:ko.observable()};
a.each(App.projects,function(d,e){App.projectsByURI[e.uri]=d;});ko.bindingHandlers.fadeVisible={init:function(d,e){var f=e();a(d).toggle(ko.utils.unwrapObservable(f));
},update:function(d,e){var f=e();ko.utils.unwrapObservable(f)?a(d).dnone().fadeInIE():a(d).fadeOutIE();}};ko.applyBindings(App.projectKO,a("#main-project").get(0));
this.update(c);},update:function(e){a("body").animate({scrollTop:0+"px"},300);Menu.change("work");App.project=App.projectsByURI[e.pathNames[1]];if(App.project>=0){var f=App.projects[App.project];
var c=(App.projects[App.project+1])?App.projects[App.project+1].uri:App.projects[0].uri;var d=(App.projects[App.project-1])?App.projects[App.project-1].uri:App.projects[App.projects.length-1].uri;
App.setTitle("/ Work / "+f.name);App.projectKO.uri(f.uri);App.projectKO.nome(f.name);App.projectKO.images(f.images);App.projectKO.bgcolor(f.bgcolor);App.projectKO.paddingtop(f.paddingtop);
App.projectKO.next(c);App.projectKO.prev(d);}else{alert("404");}}},contact:{init:function(c){a("#main-contact form").data("success",function(e,d){d.addClass("success");
mform.reset(d);setTimeout(function(){d.removeClass("success");},5000);});this.update();},update:function(c){Menu.change("contact");App.setTitle("/ Contact");
}},};})(jQuery);$(function(){App.init();});